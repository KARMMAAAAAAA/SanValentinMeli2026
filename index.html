<script>
document.addEventListener("DOMContentLoaded", function() {

    const cinematicLines = [
        "Hace tiempo apareci칩 alguien especial...",
        "Su sonrisa cambi칩 mis d칤as...",
        "Su nombre es Melissa...",
        "Y desde entonces mi coraz칩n tiene due침a..."
    ];

    let lineIndex = 0;
    let charIndex = 0;
    let currentLine = "";
    const textElement = document.getElementById("cinematicText");

    function startCinematic() {
        document.getElementById("startScreen").classList.add("hidden");
        document.getElementById("cinematicScreen").classList.remove("hidden");
        typeWriter();
    }

    function typeWriter() {
        if (lineIndex < cinematicLines.length) {
            currentLine = cinematicLines[lineIndex];
            if (charIndex < currentLine.length) {
                textElement.innerHTML += currentLine.charAt(charIndex);
                charIndex++;
                setTimeout(typeWriter, 40);
            } else {
                setTimeout(nextLine, 1200);
            }
        } else {
            setTimeout(showQuestion, 1000);
        }
    }

    function nextLine() {
        lineIndex++;
        charIndex = 0;
        textElement.innerHTML = "";
        typeWriter();
    }

    function showQuestion() {
        document.getElementById("cinematicScreen").classList.add("hidden");
        document.getElementById("questionScreen").classList.remove("hidden");
    }

    function yesAnswer() {
        document.getElementById("questionScreen").classList.add("hidden");
        document.getElementById("finalScreen").classList.remove("hidden");
    }

    const noBtn = document.getElementById("noBtn");

    function moveButton() {
        const x = Math.random() * (window.innerWidth - 100);
        const y = Math.random() * (window.innerHeight - 50);
        noBtn.style.left = x + "px";
        noBtn.style.top = y + "px";
    }

    noBtn.addEventListener("mouseover", moveButton);
    noBtn.addEventListener("click", moveButton);

    function createHeart() {
        const heart = document.createElement("div");
        heart.classList.add("heart");
        heart.innerHTML = "游눘";
        heart.style.left = Math.random() * 100 + "vw";
        heart.style.animationDuration = (Math.random() * 3 + 2) + "s";
        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), 5000);
    }

    setInterval(createHeart, 300);

    // Hacemos globales los botones
    window.startCinematic = startCinematic;
    window.yesAnswer = yesAnswer;

});
</script>
